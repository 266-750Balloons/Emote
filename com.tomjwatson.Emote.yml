app-id: com.tomjwatson.Emote
runtime: org.gnome.Platform
runtime-version: '43'
sdk: org.gnome.Sdk
command: emote
finish-args:
    - --share=ipc
    - --socket=wayland
    - --socket=fallback-x11
    - --device=dri
cleanup:
    - /include
    - /lib/pkgconfig
    - /man
    - /share/doc
    - /share/gtk-doc
    - /share/man
    - /share/pkgconfig
    - "*.la"
    - "*.a"
modules:
  - python3-requirements.json
  - name: keybinder-3.0
    sources:
      - type: archive
        url: https://github.com/kupferlauncher/keybinder/releases/download/keybinder-3.0-v0.3.2/keybinder-3.0-0.3.2.tar.gz
        sha256: e6e3de4e1f3b201814a956ab8f16dfc8a262db1937ff1eee4d855365398c6020
  # https://github.com/flathub/com.valvesoftware.Steam.Utility.steamtinkerlaunch/blob/45870ce8a15eb25d1b430ff31332ce776c933a2b/modules/xdotool.yml
  - name: xdotool
    no-autogen: true
    make-args:
      - WITHOUT_RPATH_FIX=1
    make-install-args:
      - PREFIX=${FLATPAK_DEST}
      - INSTALLMAN=${FLATPAK_DEST}/share/man
    sources:
      - type: archive
        url: https://github.com/jordansissel/xdotool/archive/v3.20211022.1/xdotool-3.20211022.1.tar.gz
        sha256: 82b15a944a5e82fee15e0f6116bd9f642bc3d0bb6989fc0ca5ad9dfe35de0847
        x-checker-data:
          type: anitya
          project-id: 8648
          stable-only: true
          url-template: https://github.com/jordansissel/xdotool/archive/v$version/xdotool-$version.tar.gz
  - name: emote
    buildsystem: meson
    sources:
      - type: dir
        path: "./"
      # - type: git
      #   url: "https://github.com/tom-james-watson/Emote"
      #   commit: f71e41b92bfe8a32451f0f0d93ae47da886d2b51
